{% extends 'base.html.twig' %}

{% block title %}Boutique{% endblock %}
{% block body %}

<div class="big-metro-site-container">
    <header>
        <div class="contain-shop">
            <h1 class="main_header_text">Boutique</h1>
            <div class="our-site-link">
                <a href="">Accueil</a>
                <i class="fa-solid fa-chevron-right"></i>
                <p>Boutique</p>
            </div>
        </div>
    </header>
</div>

{# SHOP CONTAINER #}
<div class="shop_container">
    <div class="shop_product_container">
        <!-- Entête de la section produits -->
        <div class="shop_header_contain">
            <h3>Affichage 1 - 9 sur 100 résultats</h3>
            <div class="shop_filter">
                <select id="shop_filter_select" onchange="submitForm()">
                    <option value="last">Derniers</option>
                    <option value="price_asc">Prix bas à élevé</option>
                    <option value="price_desc">Prix élevé à bas</option>
                </select>
                <i class="fa-solid fa-table-cells"></i>
                <div class="shop_bars">
                    <div class="fa-solid fa-list"></div>
                </div>
            </div>
        </div>

        <!-- Liste des produits -->
        <div class="shop_products">
            <!-- Exemple de produit avec réduction -->
            {% for bonbon in bonbons %}
                <div class="product">
                    <div class="product_img">
                        <a href="#">
                            <span class="sale-badge">-40%</span>
                            <img src="{{ asset('uploads/' ~ bonbon.image) }}" alt="Bonbons Fruités">
                        </a>
                    </div>
                    <p class="product-name">{{ bonbon.nom }} - {{bonbon.poids}}</p>
                    <p class="product-price">{{ bonbon.prix }}</p>
                    <div class="quantity-control">
                        <button class="decrease">-</button>
                        <span class="quantity">1</span>
                        <button class="increase">+</button>
                    </div>
                    <button class="add-to-cart">Ajouter au Panier</button>
                </div>
            {% endfor %}
          
        </div>
    </div>

    <!-- Menu de filtrage et recherche -->
    <div class="shop_menus">
        <form id="searchForm" action="search.php" method="GET">
            <!-- Barre de recherche -->
            <input 
                type="text" 
                name="query" 
                placeholder="Rechercher" 
                class="search-bar" 
                oninput="submitForm()" 
                aria-label="Rechercher un produit"
            >

            <!-- Catégories -->
            <div class="shop_menu_heading">
                <h1>Catégories</h1>
            </div>

            <div class="shop_menu_category">
                {% for categorie in categories %}
                <div>
                    <select name="category" id="category{{categorie.libelle}}" class="category-dropdown" onchange="submitForm()">
                        <option value="">{{categorie.libelle}}</option>
                        {% for sousCategories in categorie.sousCategories %}
                        <option value="{{sousCategories.nom}}">{{sousCategories.nom}}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endfor %}
              
            </div>

            <!-- Marques -->
            <div class="category_marque_container">
                <h1>Marques</h1>
                <div class="brand-checkboxes">
                  {% for marque in marques %}
                    <div>
                        <label for="brand_{{ marque.nom }}">
                            <input type="checkbox" id="brand_{{ marque.nom }}" name="brands[]" value="{{ marque.nom }}" onchange="submitForm()">{{ marque.nom }}
                        </label>
                    </div>
                   {% endfor %} 
                </div>
            </div>

        </form>
    </div>
</div>



{% endblock %}